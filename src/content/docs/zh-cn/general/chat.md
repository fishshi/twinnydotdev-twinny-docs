---
title: 对话  
description: 与 Twinny 对话  
---

与 Twinny 聊天，并利用工作区嵌入以增强上下文。

### 打开侧边栏

要使用 Twinny 聊天，可以通过 VSCode 侧边栏访问。Twinny 会在会话之间保留聊天历史记录。您可以通过点击顶部面板上的“历史”图标来查看聊天历史。

### 上下文与代码选择

当您在编辑器中高亮/选择代码时，Twinny 会将其作为聊天消息的上下文。如果您没有选择任何代码，它将仅使用消息本身以及之前的消息。您也可以右键点击选中的代码，选择 Twinny 选项来进行重构、解释或执行其他操作。

### 工作区嵌入

Twinny 现在支持工作区嵌入，以便为您的查询提供更相关的上下文。

### RAG 和提及的工作原理

1. 当您点击“嵌入工作区文档”按钮时，您的工作区文档会被嵌入并存储。
2. 当您发送消息时，Twinny 会查找与嵌入相关的块。
3. 这些块会被重新排序并作为查询的附加上下文。
4. 在聊天中使用 `@workspace` 提及来搜索相关文档。
5. 使用 `@problems` 来获取代码问题。
6. 使用 `@` 来为工作区中特定的文件添加上下文。

### 嵌入设置

- **嵌入提供商**：默认情况下，Twinny 使用 Ollama 嵌入（all-minilm:latest）进行嵌入。
- **提供商详情**：
  - 标签：Ollama Embedding
  - 提供商：ollama
  - 类型：embedding
  - 主机名：0.0.0.0
  - 路径：/v1/embeddings
  - 协议：http
  - 端口：11434

您可以更新这些设置，以使用不同的嵌入提供商。如果需要，理论上大多数提供商应该都能正常工作，只要它们返回正确的数据结构。

对于像 OpenAI 这样的 HTTPS 提供商，需要一个本地代理（如 LiteLLM）才能正常工作。

### 重新排序概率阈值

您可以调整重新排序概率阈值（默认值：0.14），以控制哪些结果将被包括作为上下文。较低的阈值意味着更有可能包含更多的结果。

### 切换上下文

带有线条的数据库图标允许您为每条消息开启或关闭嵌入上下文的使用。

### 嵌入工作区文档

要将您的工作区文档包括在嵌入中，请在设置面板中使用“嵌入工作区文档”按钮。
